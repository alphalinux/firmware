!
! MMS file to build LIST on VMS
!

SRCDIR		= [-.list]
OBJDIR		= 
EXEDIR		= 
INCDIR		= [-.include]
COMDIR		= [-.common]

.IFDEF DEBUG
DEBUG_FLAGS	= /DEBUG
OPT_FLAGS	= /NOOPTIMIZE 
.ELSE
DEBUG_FLAGS	= /NODEBUG
OPT_FLAGS	= /OPTIMIZE
.ENDIF

EXTRA_CFLAGS	= /G_FLOAT/SHOW=EXPANSION/LIST=$(MMS$TARGET_NAME).LIS \
		  /DEFINE=(CROSS_COMPILE_32_TO_64_BITS=1, VMS_HOST=1) \
		  /INCLUDE=$(INCDIR)
EXTRA_LINKFLAGS	= /MAP=$(MMS$TARGET_NAME).MAP

!
! Command Qualifiers (these should NEVER be changed)
!

CFLAGS		= $(DEBUG_FLAGS)$(OPT_FLAGS)$(EXTRA_CFLAGS)/OBJ=$(MMS$TARGET)
LINKFLAGS	= $(DEBUG_FLAGS)$(EXTRA_LINKFLAGS)/EXE=$(MMS$TARGET)

OBJECTS		= $(OBJDIR)DISASSEMBLER.OBJ, -
		  $(OBJDIR)CROSS_32_TO_64.OBJ

COMMONLIB	= $(COMDIR)COMMONLIB.OLB

OPTIONS		= $(COMDIR)CRTL/OPT

ALL		: ALIST.EXE
	! NULL action for ALL

$(OBJDIR)ALIST.OBJ\
		: \
		$(INCDIR)AOUT.H \
		$(SRCDIR)ALIST.C

ALIST.EXE	: \
		$(OBJDIR)ALIST.OBJ
		LINK $(LINKFLAGS) ALIST.OBJ, $(COMMONLIB)/LIB,  $(OPTIONS)
		

CLEAN		:
		  - DELETE/NOLOG $(EXEDIR)*.MAP;*
		  - DELETE/NOLOG $(OBJDIR)*.OBJ;*
		  - DELETE/NOLOG $(OBJDIR)*.LIS;*
		  - DELETE/NOLOG $(OBJDIR)*.ANA;*
